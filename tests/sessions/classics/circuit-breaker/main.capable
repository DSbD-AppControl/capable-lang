--circuit breaker protocol from  https://arxiv.org/pdf/2204.13464.pdf

role API
role Controller
role Storage
role User

union start { start : Int  }
union ping  { ping  : Unit }
union request 
union getMode
union cmd   { up      : Unit
            ; failure : Unit
            ; stop    : Unit
            }
union response

protocol API  
    = Controller ==> Storage [start] {start(Int)
    .Controller ==> API [start] {start(Int)
    .Storage ==> Controler [ping] {ping(Unit)
    .rec(X)
    .User ==> API [request] {request(String)
    .API ==> Controler [getMode] {getMode(String)
    .Controller ==> API [cmd] { up(Unit) 


                             | failure(Unit)

                             | stop() 
    }}}}}}